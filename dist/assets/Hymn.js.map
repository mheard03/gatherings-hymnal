{"version":3,"file":"Hymn.js","sources":["../../src/components/Fab.vue","../../node_modules/bootstrap/js/src/util/scrollbar.js","../../node_modules/bootstrap/js/src/util/backdrop.js","../../node_modules/bootstrap/js/src/util/focustrap.js","../../node_modules/bootstrap/js/src/util/component-functions.js","../../node_modules/bootstrap/js/src/modal.js","../../src/components/GoTo.vue","../../src/views/Hymn.vue"],"sourcesContent":["<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      windowMetrics: {\r\n        scrollTop: document.scrollingElement.scrollTop,\r\n        contentHeight: document.scrollingElement.scrollHeight,\r\n        height: window.innerHeight\r\n      },\r\n      observer: undefined,\r\n      animateText: false,\r\n      expandMarkerVisible: false\r\n    }\r\n  },\r\n  emits: [\"click\"],\r\n  mounted() {\r\n    this.observer = new IntersectionObserver((entries) => {\r\n      this.expandMarkerVisible = entries[0].isIntersecting;\r\n    });\r\n    this.observer.observe(this.$refs.expandMarker);\r\n    setTimeout(() => this.animateText = true, 500);\r\n  },\r\n  unmounted() {\r\n    if (this.observer) this.observer.disconnect();\r\n  },\r\n  computed: {\r\n    footerClass() {\r\n      let classes = \"\";\r\n      if (this.animateText) classes = \"animated \";\r\n      classes += ((this.expandMarkerVisible) ? \"\" : \"hide-text\");\r\n      return classes;\r\n    }\r\n  }\r\n}\r\n\r\n</script>\r\n\r\n<template>\r\n  <nav id=\"nav-bottom\" class=\"scaled\">\r\n    <div class=\"fab-wrapper invisible\">\r\n      <div class=\"d-flex justify-content-center\">\r\n        <button class=\"btn btn-fill btn-lg\">&nbsp;</button>\r\n      </div>\r\n    </div>\r\n    <div id=\"expand-marker\" ref=\"expandMarker\"></div>\r\n    <div class=\"fab-wrapper\" :class=\"footerClass\" ref=\"fabFixed\">\r\n      <div class=\"d-flex justify-content-center\">\r\n        <button class=\"btn btn-fill btn-lg fab shadow\" @click=\"$emit('click')\"><svg class=\"icon\"><use href=\"#hymnal\" /></svg><span>Go to...</span></button>\r\n      </div>\r\n    </div>\r\n  </nav>\r\n</template>\r\n\r\n\r\n<style scoped lang=\"scss\">\r\n/* --- Fab.vue --- */\r\n#nav-bottom {\r\n  width: 100%;\r\n  min-height: var(--page-margin-bottom);\r\n  padding-top: var(--bs-gutter-x);\r\n  position: relative;\r\n}\r\nmain + #nav-bottom {\r\n  margin-top: calc(-1 * var(--page-margin-bottom));\r\n}\r\n\r\n#expand-marker {\r\n  min-height: 1px;\r\n  width: auto;\r\n}\r\n\r\n.fab-wrapper {\r\n  width: 100%;\r\n  margin-bottom: var(--bs-gutter-x);\r\n  position: fixed;\r\n  bottom: 0;\r\n\r\n  span {\r\n    max-width: 6em;\r\n    overflow: hidden;\r\n  }\r\n\r\n  &.invisible {\r\n    position: static;\r\n  }\r\n\r\n  &.hide-text {\r\n    span {\r\n      max-width: 0em;\r\n    }\r\n  }\r\n\r\n  &.animated span {\r\n    transition: max-width 0.5s;\r\n  }\r\n}\r\n</style>\r\n","/**\n * --------------------------------------------------------------------------\n * Bootstrap (v5.1.3): util/scrollBar.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n * --------------------------------------------------------------------------\n */\n\nimport SelectorEngine from '../dom/selector-engine'\nimport Manipulator from '../dom/manipulator'\nimport { isElement } from './index'\n\nconst SELECTOR_FIXED_CONTENT = '.fixed-top, .fixed-bottom, .is-fixed, .sticky-top'\nconst SELECTOR_STICKY_CONTENT = '.sticky-top'\n\nclass ScrollBarHelper {\n  constructor() {\n    this._element = document.body\n  }\n\n  getWidth() {\n    // https://developer.mozilla.org/en-US/docs/Web/API/Window/innerWidth#usage_notes\n    const documentWidth = document.documentElement.clientWidth\n    return Math.abs(window.innerWidth - documentWidth)\n  }\n\n  hide() {\n    const width = this.getWidth()\n    this._disableOverFlow()\n    // give padding to element to balance the hidden scrollbar width\n    this._setElementAttributes(this._element, 'paddingRight', calculatedValue => calculatedValue + width)\n    // trick: We adjust positive paddingRight and negative marginRight to sticky-top elements to keep showing fullwidth\n    this._setElementAttributes(SELECTOR_FIXED_CONTENT, 'paddingRight', calculatedValue => calculatedValue + width)\n    this._setElementAttributes(SELECTOR_STICKY_CONTENT, 'marginRight', calculatedValue => calculatedValue - width)\n  }\n\n  _disableOverFlow() {\n    this._saveInitialAttribute(this._element, 'overflow')\n    this._element.style.overflow = 'hidden'\n  }\n\n  _setElementAttributes(selector, styleProp, callback) {\n    const scrollbarWidth = this.getWidth()\n    const manipulationCallBack = element => {\n      if (element !== this._element && window.innerWidth > element.clientWidth + scrollbarWidth) {\n        return\n      }\n\n      this._saveInitialAttribute(element, styleProp)\n      const calculatedValue = window.getComputedStyle(element)[styleProp]\n      element.style[styleProp] = `${callback(Number.parseFloat(calculatedValue))}px`\n    }\n\n    this._applyManipulationCallback(selector, manipulationCallBack)\n  }\n\n  reset() {\n    this._resetElementAttributes(this._element, 'overflow')\n    this._resetElementAttributes(this._element, 'paddingRight')\n    this._resetElementAttributes(SELECTOR_FIXED_CONTENT, 'paddingRight')\n    this._resetElementAttributes(SELECTOR_STICKY_CONTENT, 'marginRight')\n  }\n\n  _saveInitialAttribute(element, styleProp) {\n    const actualValue = element.style[styleProp]\n    if (actualValue) {\n      Manipulator.setDataAttribute(element, styleProp, actualValue)\n    }\n  }\n\n  _resetElementAttributes(selector, styleProp) {\n    const manipulationCallBack = element => {\n      const value = Manipulator.getDataAttribute(element, styleProp)\n      if (typeof value === 'undefined') {\n        element.style.removeProperty(styleProp)\n      } else {\n        Manipulator.removeDataAttribute(element, styleProp)\n        element.style[styleProp] = value\n      }\n    }\n\n    this._applyManipulationCallback(selector, manipulationCallBack)\n  }\n\n  _applyManipulationCallback(selector, callBack) {\n    if (isElement(selector)) {\n      callBack(selector)\n    } else {\n      SelectorEngine.find(selector, this._element).forEach(callBack)\n    }\n  }\n\n  isOverflowing() {\n    return this.getWidth() > 0\n  }\n}\n\nexport default ScrollBarHelper\n","/**\n * --------------------------------------------------------------------------\n * Bootstrap (v5.1.3): util/backdrop.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n * --------------------------------------------------------------------------\n */\n\nimport EventHandler from '../dom/event-handler'\nimport { execute, executeAfterTransition, getElement, reflow, typeCheckConfig } from './index'\n\nconst Default = {\n  className: 'modal-backdrop',\n  isVisible: true, // if false, we use the backdrop helper without adding any element to the dom\n  isAnimated: false,\n  rootElement: 'body', // give the choice to place backdrop under different elements\n  clickCallback: null\n}\n\nconst DefaultType = {\n  className: 'string',\n  isVisible: 'boolean',\n  isAnimated: 'boolean',\n  rootElement: '(element|string)',\n  clickCallback: '(function|null)'\n}\nconst NAME = 'backdrop'\nconst CLASS_NAME_FADE = 'fade'\nconst CLASS_NAME_SHOW = 'show'\n\nconst EVENT_MOUSEDOWN = `mousedown.bs.${NAME}`\n\nclass Backdrop {\n  constructor(config) {\n    this._config = this._getConfig(config)\n    this._isAppended = false\n    this._element = null\n  }\n\n  show(callback) {\n    if (!this._config.isVisible) {\n      execute(callback)\n      return\n    }\n\n    this._append()\n\n    if (this._config.isAnimated) {\n      reflow(this._getElement())\n    }\n\n    this._getElement().classList.add(CLASS_NAME_SHOW)\n\n    this._emulateAnimation(() => {\n      execute(callback)\n    })\n  }\n\n  hide(callback) {\n    if (!this._config.isVisible) {\n      execute(callback)\n      return\n    }\n\n    this._getElement().classList.remove(CLASS_NAME_SHOW)\n\n    this._emulateAnimation(() => {\n      this.dispose()\n      execute(callback)\n    })\n  }\n\n  // Private\n\n  _getElement() {\n    if (!this._element) {\n      const backdrop = document.createElement('div')\n      backdrop.className = this._config.className\n      if (this._config.isAnimated) {\n        backdrop.classList.add(CLASS_NAME_FADE)\n      }\n\n      this._element = backdrop\n    }\n\n    return this._element\n  }\n\n  _getConfig(config) {\n    config = {\n      ...Default,\n      ...(typeof config === 'object' ? config : {})\n    }\n\n    // use getElement() with the default \"body\" to get a fresh Element on each instantiation\n    config.rootElement = getElement(config.rootElement)\n    typeCheckConfig(NAME, config, DefaultType)\n    return config\n  }\n\n  _append() {\n    if (this._isAppended) {\n      return\n    }\n\n    this._config.rootElement.append(this._getElement())\n\n    EventHandler.on(this._getElement(), EVENT_MOUSEDOWN, () => {\n      execute(this._config.clickCallback)\n    })\n\n    this._isAppended = true\n  }\n\n  dispose() {\n    if (!this._isAppended) {\n      return\n    }\n\n    EventHandler.off(this._element, EVENT_MOUSEDOWN)\n\n    this._element.remove()\n    this._isAppended = false\n  }\n\n  _emulateAnimation(callback) {\n    executeAfterTransition(callback, this._getElement(), this._config.isAnimated)\n  }\n}\n\nexport default Backdrop\n","/**\n * --------------------------------------------------------------------------\n * Bootstrap (v5.1.3): util/focustrap.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n * --------------------------------------------------------------------------\n */\n\nimport EventHandler from '../dom/event-handler'\nimport SelectorEngine from '../dom/selector-engine'\nimport { typeCheckConfig } from './index'\n\nconst Default = {\n  trapElement: null, // The element to trap focus inside of\n  autofocus: true\n}\n\nconst DefaultType = {\n  trapElement: 'element',\n  autofocus: 'boolean'\n}\n\nconst NAME = 'focustrap'\nconst DATA_KEY = 'bs.focustrap'\nconst EVENT_KEY = `.${DATA_KEY}`\nconst EVENT_FOCUSIN = `focusin${EVENT_KEY}`\nconst EVENT_KEYDOWN_TAB = `keydown.tab${EVENT_KEY}`\n\nconst TAB_KEY = 'Tab'\nconst TAB_NAV_FORWARD = 'forward'\nconst TAB_NAV_BACKWARD = 'backward'\n\nclass FocusTrap {\n  constructor(config) {\n    this._config = this._getConfig(config)\n    this._isActive = false\n    this._lastTabNavDirection = null\n  }\n\n  activate() {\n    const { trapElement, autofocus } = this._config\n\n    if (this._isActive) {\n      return\n    }\n\n    if (autofocus) {\n      trapElement.focus()\n    }\n\n    EventHandler.off(document, EVENT_KEY) // guard against infinite focus loop\n    EventHandler.on(document, EVENT_FOCUSIN, event => this._handleFocusin(event))\n    EventHandler.on(document, EVENT_KEYDOWN_TAB, event => this._handleKeydown(event))\n\n    this._isActive = true\n  }\n\n  deactivate() {\n    if (!this._isActive) {\n      return\n    }\n\n    this._isActive = false\n    EventHandler.off(document, EVENT_KEY)\n  }\n\n  // Private\n\n  _handleFocusin(event) {\n    const { target } = event\n    const { trapElement } = this._config\n\n    if (target === document || target === trapElement || trapElement.contains(target)) {\n      return\n    }\n\n    const elements = SelectorEngine.focusableChildren(trapElement)\n\n    if (elements.length === 0) {\n      trapElement.focus()\n    } else if (this._lastTabNavDirection === TAB_NAV_BACKWARD) {\n      elements[elements.length - 1].focus()\n    } else {\n      elements[0].focus()\n    }\n  }\n\n  _handleKeydown(event) {\n    if (event.key !== TAB_KEY) {\n      return\n    }\n\n    this._lastTabNavDirection = event.shiftKey ? TAB_NAV_BACKWARD : TAB_NAV_FORWARD\n  }\n\n  _getConfig(config) {\n    config = {\n      ...Default,\n      ...(typeof config === 'object' ? config : {})\n    }\n    typeCheckConfig(NAME, config, DefaultType)\n    return config\n  }\n}\n\nexport default FocusTrap\n","/**\n * --------------------------------------------------------------------------\n * Bootstrap (v5.1.3): util/component-functions.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n * --------------------------------------------------------------------------\n */\n\nimport EventHandler from '../dom/event-handler'\nimport { getElementFromSelector, isDisabled } from './index'\n\nconst enableDismissTrigger = (component, method = 'hide') => {\n  const clickEvent = `click.dismiss${component.EVENT_KEY}`\n  const name = component.NAME\n\n  EventHandler.on(document, clickEvent, `[data-bs-dismiss=\"${name}\"]`, function (event) {\n    if (['A', 'AREA'].includes(this.tagName)) {\n      event.preventDefault()\n    }\n\n    if (isDisabled(this)) {\n      return\n    }\n\n    const target = getElementFromSelector(this) || this.closest(`.${name}`)\n    const instance = component.getOrCreateInstance(target)\n\n    // Method argument is left, for Alert and only, as it doesn't implement the 'hide' method\n    instance[method]()\n  })\n}\n\nexport {\n  enableDismissTrigger\n}\n","/**\n * --------------------------------------------------------------------------\n * Bootstrap (v5.1.3): modal.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n * --------------------------------------------------------------------------\n */\n\nimport {\n  defineJQueryPlugin,\n  getElementFromSelector,\n  isRTL,\n  isVisible,\n  reflow,\n  typeCheckConfig\n} from './util/index'\nimport EventHandler from './dom/event-handler'\nimport Manipulator from './dom/manipulator'\nimport SelectorEngine from './dom/selector-engine'\nimport ScrollBarHelper from './util/scrollbar'\nimport BaseComponent from './base-component'\nimport Backdrop from './util/backdrop'\nimport FocusTrap from './util/focustrap'\nimport { enableDismissTrigger } from './util/component-functions'\n\n/**\n * ------------------------------------------------------------------------\n * Constants\n * ------------------------------------------------------------------------\n */\n\nconst NAME = 'modal'\nconst DATA_KEY = 'bs.modal'\nconst EVENT_KEY = `.${DATA_KEY}`\nconst DATA_API_KEY = '.data-api'\nconst ESCAPE_KEY = 'Escape'\n\nconst Default = {\n  backdrop: true,\n  keyboard: true,\n  focus: true\n}\n\nconst DefaultType = {\n  backdrop: '(boolean|string)',\n  keyboard: 'boolean',\n  focus: 'boolean'\n}\n\nconst EVENT_HIDE = `hide${EVENT_KEY}`\nconst EVENT_HIDE_PREVENTED = `hidePrevented${EVENT_KEY}`\nconst EVENT_HIDDEN = `hidden${EVENT_KEY}`\nconst EVENT_SHOW = `show${EVENT_KEY}`\nconst EVENT_SHOWN = `shown${EVENT_KEY}`\nconst EVENT_RESIZE = `resize${EVENT_KEY}`\nconst EVENT_CLICK_DISMISS = `click.dismiss${EVENT_KEY}`\nconst EVENT_KEYDOWN_DISMISS = `keydown.dismiss${EVENT_KEY}`\nconst EVENT_MOUSEUP_DISMISS = `mouseup.dismiss${EVENT_KEY}`\nconst EVENT_MOUSEDOWN_DISMISS = `mousedown.dismiss${EVENT_KEY}`\nconst EVENT_CLICK_DATA_API = `click${EVENT_KEY}${DATA_API_KEY}`\n\nconst CLASS_NAME_OPEN = 'modal-open'\nconst CLASS_NAME_FADE = 'fade'\nconst CLASS_NAME_SHOW = 'show'\nconst CLASS_NAME_STATIC = 'modal-static'\n\nconst OPEN_SELECTOR = '.modal.show'\nconst SELECTOR_DIALOG = '.modal-dialog'\nconst SELECTOR_MODAL_BODY = '.modal-body'\nconst SELECTOR_DATA_TOGGLE = '[data-bs-toggle=\"modal\"]'\n\n/**\n * ------------------------------------------------------------------------\n * Class Definition\n * ------------------------------------------------------------------------\n */\n\nclass Modal extends BaseComponent {\n  constructor(element, config) {\n    super(element)\n\n    this._config = this._getConfig(config)\n    this._dialog = SelectorEngine.findOne(SELECTOR_DIALOG, this._element)\n    this._backdrop = this._initializeBackDrop()\n    this._focustrap = this._initializeFocusTrap()\n    this._isShown = false\n    this._ignoreBackdropClick = false\n    this._isTransitioning = false\n    this._scrollBar = new ScrollBarHelper()\n  }\n\n  // Getters\n\n  static get Default() {\n    return Default\n  }\n\n  static get NAME() {\n    return NAME\n  }\n\n  // Public\n\n  toggle(relatedTarget) {\n    return this._isShown ? this.hide() : this.show(relatedTarget)\n  }\n\n  show(relatedTarget) {\n    if (this._isShown || this._isTransitioning) {\n      return\n    }\n\n    const showEvent = EventHandler.trigger(this._element, EVENT_SHOW, {\n      relatedTarget\n    })\n\n    if (showEvent.defaultPrevented) {\n      return\n    }\n\n    this._isShown = true\n\n    if (this._isAnimated()) {\n      this._isTransitioning = true\n    }\n\n    this._scrollBar.hide()\n\n    document.body.classList.add(CLASS_NAME_OPEN)\n\n    this._adjustDialog()\n\n    this._setEscapeEvent()\n    this._setResizeEvent()\n\n    EventHandler.on(this._dialog, EVENT_MOUSEDOWN_DISMISS, () => {\n      EventHandler.one(this._element, EVENT_MOUSEUP_DISMISS, event => {\n        if (event.target === this._element) {\n          this._ignoreBackdropClick = true\n        }\n      })\n    })\n\n    this._showBackdrop(() => this._showElement(relatedTarget))\n  }\n\n  hide() {\n    if (!this._isShown || this._isTransitioning) {\n      return\n    }\n\n    const hideEvent = EventHandler.trigger(this._element, EVENT_HIDE)\n\n    if (hideEvent.defaultPrevented) {\n      return\n    }\n\n    this._isShown = false\n    const isAnimated = this._isAnimated()\n\n    if (isAnimated) {\n      this._isTransitioning = true\n    }\n\n    this._setEscapeEvent()\n    this._setResizeEvent()\n\n    this._focustrap.deactivate()\n\n    this._element.classList.remove(CLASS_NAME_SHOW)\n\n    EventHandler.off(this._element, EVENT_CLICK_DISMISS)\n    EventHandler.off(this._dialog, EVENT_MOUSEDOWN_DISMISS)\n\n    this._queueCallback(() => this._hideModal(), this._element, isAnimated)\n  }\n\n  dispose() {\n    [window, this._dialog]\n      .forEach(htmlElement => EventHandler.off(htmlElement, EVENT_KEY))\n\n    this._backdrop.dispose()\n    this._focustrap.deactivate()\n    super.dispose()\n  }\n\n  handleUpdate() {\n    this._adjustDialog()\n  }\n\n  // Private\n\n  _initializeBackDrop() {\n    return new Backdrop({\n      isVisible: Boolean(this._config.backdrop), // 'static' option will be translated to true, and booleans will keep their value\n      isAnimated: this._isAnimated()\n    })\n  }\n\n  _initializeFocusTrap() {\n    return new FocusTrap({\n      trapElement: this._element\n    })\n  }\n\n  _getConfig(config) {\n    config = {\n      ...Default,\n      ...Manipulator.getDataAttributes(this._element),\n      ...(typeof config === 'object' ? config : {})\n    }\n    typeCheckConfig(NAME, config, DefaultType)\n    return config\n  }\n\n  _showElement(relatedTarget) {\n    const isAnimated = this._isAnimated()\n    const modalBody = SelectorEngine.findOne(SELECTOR_MODAL_BODY, this._dialog)\n\n    if (!this._element.parentNode || this._element.parentNode.nodeType !== Node.ELEMENT_NODE) {\n      // Don't move modal's DOM position\n      document.body.append(this._element)\n    }\n\n    this._element.style.display = 'block'\n    this._element.removeAttribute('aria-hidden')\n    this._element.setAttribute('aria-modal', true)\n    this._element.setAttribute('role', 'dialog')\n    this._element.scrollTop = 0\n\n    if (modalBody) {\n      modalBody.scrollTop = 0\n    }\n\n    if (isAnimated) {\n      reflow(this._element)\n    }\n\n    this._element.classList.add(CLASS_NAME_SHOW)\n\n    const transitionComplete = () => {\n      if (this._config.focus) {\n        this._focustrap.activate()\n      }\n\n      this._isTransitioning = false\n      EventHandler.trigger(this._element, EVENT_SHOWN, {\n        relatedTarget\n      })\n    }\n\n    this._queueCallback(transitionComplete, this._dialog, isAnimated)\n  }\n\n  _setEscapeEvent() {\n    if (this._isShown) {\n      EventHandler.on(this._element, EVENT_KEYDOWN_DISMISS, event => {\n        if (this._config.keyboard && event.key === ESCAPE_KEY) {\n          event.preventDefault()\n          this.hide()\n        } else if (!this._config.keyboard && event.key === ESCAPE_KEY) {\n          this._triggerBackdropTransition()\n        }\n      })\n    } else {\n      EventHandler.off(this._element, EVENT_KEYDOWN_DISMISS)\n    }\n  }\n\n  _setResizeEvent() {\n    if (this._isShown) {\n      EventHandler.on(window, EVENT_RESIZE, () => this._adjustDialog())\n    } else {\n      EventHandler.off(window, EVENT_RESIZE)\n    }\n  }\n\n  _hideModal() {\n    this._element.style.display = 'none'\n    this._element.setAttribute('aria-hidden', true)\n    this._element.removeAttribute('aria-modal')\n    this._element.removeAttribute('role')\n    this._isTransitioning = false\n    this._backdrop.hide(() => {\n      document.body.classList.remove(CLASS_NAME_OPEN)\n      this._resetAdjustments()\n      this._scrollBar.reset()\n      EventHandler.trigger(this._element, EVENT_HIDDEN)\n    })\n  }\n\n  _showBackdrop(callback) {\n    EventHandler.on(this._element, EVENT_CLICK_DISMISS, event => {\n      if (this._ignoreBackdropClick) {\n        this._ignoreBackdropClick = false\n        return\n      }\n\n      if (event.target !== event.currentTarget) {\n        return\n      }\n\n      if (this._config.backdrop === true) {\n        this.hide()\n      } else if (this._config.backdrop === 'static') {\n        this._triggerBackdropTransition()\n      }\n    })\n\n    this._backdrop.show(callback)\n  }\n\n  _isAnimated() {\n    return this._element.classList.contains(CLASS_NAME_FADE)\n  }\n\n  _triggerBackdropTransition() {\n    const hideEvent = EventHandler.trigger(this._element, EVENT_HIDE_PREVENTED)\n    if (hideEvent.defaultPrevented) {\n      return\n    }\n\n    const { classList, scrollHeight, style } = this._element\n    const isModalOverflowing = scrollHeight > document.documentElement.clientHeight\n\n    // return if the following background transition hasn't yet completed\n    if ((!isModalOverflowing && style.overflowY === 'hidden') || classList.contains(CLASS_NAME_STATIC)) {\n      return\n    }\n\n    if (!isModalOverflowing) {\n      style.overflowY = 'hidden'\n    }\n\n    classList.add(CLASS_NAME_STATIC)\n    this._queueCallback(() => {\n      classList.remove(CLASS_NAME_STATIC)\n      if (!isModalOverflowing) {\n        this._queueCallback(() => {\n          style.overflowY = ''\n        }, this._dialog)\n      }\n    }, this._dialog)\n\n    this._element.focus()\n  }\n\n  // ----------------------------------------------------------------------\n  // the following methods are used to handle overflowing modals\n  // ----------------------------------------------------------------------\n\n  _adjustDialog() {\n    const isModalOverflowing = this._element.scrollHeight > document.documentElement.clientHeight\n    const scrollbarWidth = this._scrollBar.getWidth()\n    const isBodyOverflowing = scrollbarWidth > 0\n\n    if ((!isBodyOverflowing && isModalOverflowing && !isRTL()) || (isBodyOverflowing && !isModalOverflowing && isRTL())) {\n      this._element.style.paddingLeft = `${scrollbarWidth}px`\n    }\n\n    if ((isBodyOverflowing && !isModalOverflowing && !isRTL()) || (!isBodyOverflowing && isModalOverflowing && isRTL())) {\n      this._element.style.paddingRight = `${scrollbarWidth}px`\n    }\n  }\n\n  _resetAdjustments() {\n    this._element.style.paddingLeft = ''\n    this._element.style.paddingRight = ''\n  }\n\n  // Static\n\n  static jQueryInterface(config, relatedTarget) {\n    return this.each(function () {\n      const data = Modal.getOrCreateInstance(this, config)\n\n      if (typeof config !== 'string') {\n        return\n      }\n\n      if (typeof data[config] === 'undefined') {\n        throw new TypeError(`No method named \"${config}\"`)\n      }\n\n      data[config](relatedTarget)\n    })\n  }\n}\n\n/**\n * ------------------------------------------------------------------------\n * Data Api implementation\n * ------------------------------------------------------------------------\n */\n\nEventHandler.on(document, EVENT_CLICK_DATA_API, SELECTOR_DATA_TOGGLE, function (event) {\n  const target = getElementFromSelector(this)\n\n  if (['A', 'AREA'].includes(this.tagName)) {\n    event.preventDefault()\n  }\n\n  EventHandler.one(target, EVENT_SHOW, showEvent => {\n    if (showEvent.defaultPrevented) {\n      // only register focus restorer if modal will actually get shown\n      return\n    }\n\n    EventHandler.one(target, EVENT_HIDDEN, () => {\n      if (isVisible(this)) {\n        this.focus()\n      }\n    })\n  })\n\n  // avoid conflict when clicking moddal toggler while another one is open\n  const allReadyOpen = SelectorEngine.findOne(OPEN_SELECTOR)\n  if (allReadyOpen) {\n    Modal.getInstance(allReadyOpen).hide()\n  }\n\n  const data = Modal.getOrCreateInstance(target)\n\n  data.toggle(this)\n})\n\nenableDismissTrigger(Modal)\n\n/**\n * ------------------------------------------------------------------------\n * jQuery\n * ------------------------------------------------------------------------\n * add .Modal to jQuery only if jQuery is present\n */\n\ndefineJQueryPlugin(Modal)\n\nexport default Modal\n","<script>\r\nimport Fab from '@/components/Fab.vue';\r\nimport Search from '@/components/Search.vue';\r\nimport Modal from 'bootstrap/js/src/modal';\r\n\r\nexport default {\r\n  components: { Fab, Search },\r\n  data() {\r\n    return {\r\n      bsModal: undefined,\r\n      heading: \"Go to...\",\r\n      isModalVisible: false\r\n    }\r\n  },\r\n  mounted() {\r\n    this.bsModal = new Modal(this.$refs.goToModal);\r\n    this.$refs.goToModal.addEventListener(\"shown.bs.modal\", this.onModalShown);\r\n    this.$refs.goToModal.addEventListener(\"hidden.bs.modal\", this.onModalHidden);\r\n    console.log('root', this.$root);\r\n  },\r\n  unmounted() {\r\n    if (this.$refs.goToModal) {\r\n      this.$refs.goToModal.removeEventListener(\"shown.bs.modal\", this.onModalShown);\r\n      this.$refs.goToModal.removeEventListener(\"hidden.bs.modal\", this.onModalHidden);\r\n    }\r\n  },\r\n  methods: {\r\n    onFabClick() {\r\n      this.bsModal.show();\r\n    },\r\n    onLabelChange(newLabel) {\r\n      this.heading = newLabel;\r\n    },\r\n    async onModalShown() {\r\n      this.$refs.search.value = \"\";\r\n      this.isModalVisible = true;\r\n      await this.$nextTick();\r\n      this.$refs.search.focus();\r\n    },\r\n    onModalHidden() {\r\n      this.isModalVisible = false;\r\n    }\r\n  },\r\n  watch: {\r\n    $route() {\r\n      this.bsModal.hide();\r\n    }\r\n  }\r\n}\r\n\r\n</script>\r\n\r\n<template>\r\n  <Fab @click=\"onFabClick\" :style=\"{ opacity: (isModalVisible ? 0 : 1) }\"></Fab>\r\n  <div class=\"modal fade\" id=\"goToModal\" ref=\"goToModal\" tabindex=\"-1\" aria-labelledby=\"goToModalLabel\" aria-hidden=\"true\">\r\n    <div class=\"modal-dialog\">\r\n      <div class=\"modal-content\">\r\n        <div class=\"modal-header\">\r\n          <h5 class=\"modal-title\" id=\"goToModalLabel\">{{ heading }}</h5>\r\n          <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\r\n        </div>\r\n        <div class=\"modal-body pt-2\">\r\n          <Search ref=\"search\" @labelChange=\"onLabelChange\" @heightChange=\"console.log('heightChange')\" :hide-label=\"true\"></Search>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n\r\n<style scoped lang=\"scss\">\r\n/* --- GoTo.vue --- */\r\n#goToModal {\r\n  .modal-header {\r\n    border-bottom: none;\r\n    padding-bottom: 0;\r\n  }\r\n  .modal-body {\r\n    padding-top: 0;\r\n    min-height: calc(var(--input-height) * 6);\r\n  }\r\n}\r\n</style>\r\n\r\n\r\n","<template>\r\n  <nav id=\"primaryNav\" class=\"scaled navbar navbar-expand-lg\">\r\n    <div class=\"container\">\r\n      <button class=\"btn btn-ghost back\" @click=\"$router.backOrDefault()\"><svg class=\"icon\"><use href=\"#back\" /></svg></button>\r\n      <!-- <button class=\"btn btn-ghost\"><svg class=\"icon\"><use href=\"#text-options\" /></svg></button> -->\r\n    </div>\r\n  </nav>\r\n  <main>\r\n    <div id=\"hymnContainer\" class=\"container\" ref=\"hymnContainer\">\r\n      <HymnsDbProgress progressProp=\"hymns\" loading=\"Loading hymn...\">\r\n        <template v-for=\"hymn of hymns\" :key=\"hymn.hymnId\">\r\n          <section :id=\"hymn.suffix\" :class=\"hymn.special\">\r\n            <h1 class=\"mb-4\">{{ hymn.title }}</h1>\r\n            <div class=\"lines\">\r\n              <template v-for=\"line of hymn.lines\">\r\n                <p :class=\"line.type\" v-html=\"line.html\"></p>\r\n              </template>\r\n              <p ref=\"dummyVerses\" class=\"dummyVerse verse\"></p>\r\n            </div>\r\n          </section>\r\n        </template>\r\n      </HymnsDbProgress>      \r\n    </div>\r\n  </main>\r\n  <GoTo></GoTo>\r\n</template>\r\n\r\n<script>\r\nimport GoTo from '@/components/GoTo.vue';\r\nimport HymnsDbProgress from '@/components/HymnsDbProgress.vue';\r\n\r\nexport default {\r\n  components: { GoTo, HymnsDbProgress },\r\n  props: {\r\n    hymnalId: { required: true },\r\n    hymnNo: { required: true },\r\n    suffix: { required: false }\r\n  },\r\n  data() {\r\n    return {\r\n      fontResizeObserver: undefined,\r\n      hymns: []\r\n    }\r\n  },\r\n  async mounted() {\r\n    let oldMarkerWidth = -1;\r\n    function onFontResize() {\r\n      if (!this.$refs) return;\r\n      let markerWidths = this.$refs.dummyVerses\r\n        .map(dv => getComputedStyle(dv, '::marker').width)\r\n        .map(w => parseFloat(w));\r\n      markerWidths = Math.max(...markerWidths, 1);\r\n      if (markerWidth) {\r\n        if (markerWidth != oldMarkerWidth) {\r\n          oldMarkerWidth = markerWidth;\r\n          root.style.setProperty(\"--verse-indent\", newValue + \"px\");\r\n        }\r\n      }\r\n      else {\r\n        root.style.removeProperty(\"--verse-indent\");\r\n      }\r\n    }\r\n    this.fontResizeObserver = new ResizeObserver(onFontResize);\r\n\r\n    this.loadHymns();\r\n  },\r\n  unmounted() {\r\n    this.fontResizeObserver.disconnect();\r\n  },\r\n  methods: {\r\n    async loadHymns() {\r\n      this.hymns = await this.$hymnsDb.getHymns(this.hymnalId, parseInt(this.hymnNo) || 1);\r\n      await this.$nextTick();\r\n  \r\n      (this.$refs.dummyVerses || []).forEach(dv => this.fontResizeObserver.observe(dv));\r\n\r\n      if (this.suffix || window.location.hash) {\r\n        let id = this.suffix || window.location.hash.replace(\"#\", \"\");\r\n        if (id) {\r\n          let el = document.getElementById(id);\r\n          if (el) {\r\n            el.scrollIntoView({ behavior: 'instant' });\r\n          }\r\n        }\r\n      }\r\n    }\r\n  },\r\n  watch: {\r\n    hymnNo() { this.loadHymns(); },\r\n    hymnalId() { this.loadHymns(); }\r\n  }\r\n};\r\n</script>\r\n \r\n<style scoped lang=\"scss\">\r\n/* --- Hymn.vue --- */\r\n@import \"../scss/bootstrap-base\";\r\n\r\n#hymnContainer {\r\n  --verse-indent: 0.75rem;\r\n}\r\n/* \r\nmain {\r\n  // for the shadow H1\r\n  overflow: hidden;\r\n  position: relative;\r\n}\r\n*/\r\nsection {\r\n  counter-reset: verse;\r\n  position: relative;\r\n  &:not(:first-of-type) > h1 {\r\n    margin-top: 2rem;\r\n  }\r\n}\r\n.lines {\r\n  max-width: 40rem;\r\n  --width: min(40rem, 100%);\r\n  margin-left: calc((100% - var(--width)) / 4);\r\n}\r\nh1 {\r\n  color: var(--ui-color);\r\n  scroll-margin-top: 0.5rem;\r\n}\r\np.lines {\r\n  white-space: pre-line;\r\n}\r\np.copyright {\r\n  font-size: min(var(--font-size), 24px);\r\n  line-height: 1;\r\n  margin-top: 2.5em;\r\n  margin-bottom: 0;\r\n  color: var(--gray-600);\r\n}\r\n\r\n\r\n/* Verses */\r\nsection:not(.no-verses) {\r\n  counter-reset: list-item;\r\n\r\n  p.verse {\r\n    position: relative;\r\n  }\r\n  p.verse:not(.numberless),\r\n  p.chorus {\r\n    border-left: 1px solid var(--gray-900);\r\n    margin-left: var(--verse-indent);\r\n    padding-left: 0.25rem;\r\n  }\r\n  p.verse {\r\n    display: list-item;\r\n    list-style-type: decimal;\r\n    list-style-position: outside;\r\n  }\r\n  p.verse::marker {\r\n    content: counter(list-item) \" \";\r\n    font-size: min(1rem, 64px);\r\n  }\r\n}\r\n\r\n/* Chorus */\r\np.chorus {\r\n  color: var(--ui-color);\r\n}\r\np.verse + p.chorus {\r\n  margin-top: -1rem;\r\n  padding-top: 0.3rem;\r\n  margin-bottom: 1.5rem;\r\n}\r\n\r\n/* Intro/outro */\r\np.intro, p.outro {\r\n  font-style: italic;\r\n}\r\np.intro {\r\n  color: var(--chorus-color);\r\n}\r\n\r\n/* Dummy verse (for marker sizing) */\r\np.dummyVerse {\r\n  position: absolute !important;\r\n  visibility: hidden !important;\r\n  left: 0;\r\n  top: 0;\r\n}\r\n</style>"],"names":["_sfc_main","data","windowMetrics","scrollTop","document","scrollingElement","contentHeight","scrollHeight","height","window","innerHeight","observer","animateText","expandMarkerVisible","emits","mounted","this","IntersectionObserver","entries","isIntersecting","observe","$refs","expandMarker","setTimeout","unmounted","disconnect","computed","footerClass","classes","id","class","_createElementVNode","createBaseVNode","ref","_hoisted_4","_hoisted_6","href","_openBlock","_createElementBlock","_hoisted_1","_hoisted_2","_hoisted_3","_normalizeClass","$options","onClick","$event","_ctx","$emit","SELECTOR_FIXED_CONTENT","SELECTOR_STICKY_CONTENT","ScrollBarHelper","constructor","_element","body","getWidth","documentWidth","documentElement","clientWidth","Math","abs","innerWidth","hide","width","_disableOverFlow","_setElementAttributes","calculatedValue","_saveInitialAttribute","style","overflow","selector","styleProp","callback","scrollbarWidth","manipulationCallBack","element","getComputedStyle","Number","parseFloat","_applyManipulationCallback","reset","_resetElementAttributes","actualValue","Manipulator","setDataAttribute","value","getDataAttribute","removeProperty","removeDataAttribute","callBack","isElement","SelectorEngine","find","forEach","isOverflowing","Default","className","isVisible","isAnimated","rootElement","clickCallback","DefaultType","NAME","CLASS_NAME_FADE","CLASS_NAME_SHOW","EVENT_MOUSEDOWN","Backdrop","config","_config","_getConfig","_isAppended","show","_append","reflow","_getElement","classList","add","_emulateAnimation","execute","remove","dispose","backdrop","createElement","getElement","append","EventHandler","on","off","executeAfterTransition","trapElement","autofocus","DATA_KEY","EVENT_KEY","EVENT_FOCUSIN","EVENT_KEYDOWN_TAB","TAB_KEY","TAB_NAV_FORWARD","TAB_NAV_BACKWARD","FocusTrap","_isActive","_lastTabNavDirection","activate","focus","_handleFocusin","event","_handleKeydown","deactivate","target","contains","elements","focusableChildren","length","key","shiftKey","enableDismissTrigger","component","method","clickEvent","name","includes","tagName","preventDefault","isDisabled","getElementFromSelector","closest","instance","getOrCreateInstance","DATA_API_KEY","ESCAPE_KEY","keyboard","EVENT_HIDE","EVENT_HIDE_PREVENTED","EVENT_HIDDEN","EVENT_SHOW","EVENT_SHOWN","EVENT_RESIZE","EVENT_CLICK_DISMISS","EVENT_KEYDOWN_DISMISS","EVENT_MOUSEUP_DISMISS","EVENT_MOUSEDOWN_DISMISS","EVENT_CLICK_DATA_API","CLASS_NAME_OPEN","CLASS_NAME_STATIC","OPEN_SELECTOR","SELECTOR_DIALOG","SELECTOR_MODAL_BODY","SELECTOR_DATA_TOGGLE","Modal","BaseComponent","super","_dialog","findOne","_backdrop","_initializeBackDrop","_focustrap","_initializeFocusTrap","_isShown","_ignoreBackdropClick","_isTransitioning","_scrollBar","toggle","relatedTarget","showEvent","trigger","defaultPrevented","_isAnimated","_adjustDialog","_setEscapeEvent","_setResizeEvent","one","_showBackdrop","_showElement","hideEvent","_queueCallback","_hideModal","htmlElement","handleUpdate","Boolean","getDataAttributes","typeCheckConfig","modalBody","parentNode","nodeType","Node","ELEMENT_NODE","display","removeAttribute","setAttribute","transitionComplete","_triggerBackdropTransition","_resetAdjustments","currentTarget","isModalOverflowing","clientHeight","overflowY","isBodyOverflowing","isRTL","paddingLeft","paddingRight","static","each","TypeError","allReadyOpen","getInstance","defineJQueryPlugin","components","Fab","Search","bsModal","heading","isModalVisible","goToModal","addEventListener","onModalShown","onModalHidden","console","log","$root","removeEventListener","methods","onFabClick","onLabelChange","newLabel","async","search","$nextTick","watch","$route","tabindex","type","_hoisted_7","_createVNode","_component_Fab","$data","_hoisted_5","_toDisplayString","_component_Search","onHeightChange","_cache","GoTo","HymnsDbProgress","props","hymnalId","required","hymnNo","suffix","fontResizeObserver","hymns","oldMarkerWidth","onFontResize","markerWidths","dummyVerses","map","dv","w","max","markerWidth","root","setProperty","newValue","ResizeObserver","loadHymns","$hymnsDb","getHymns","parseInt","location","hash","replace","el","getElementById","scrollIntoView","behavior","_hoisted_8","$router","backOrDefault","_component_HymnsDbProgress","progressProp","loading","_Fragment","_renderList","hymn","hymnId","special","title","lines","line","innerHTML","html","_component_GoTo"],"mappings":"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"}